<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Buddy - Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        .test-button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #1d4ed8;
        }
        .result {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
            white-space: pre-wrap;
        }
        .loading {
            color: #6b7280;
            font-style: italic;
        }
        .success {
            color: #059669;
            font-weight: bold;
        }
        .error {
            color: #dc2626;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† AI Study Buddy - Test Page</h1>
        
        <div class="test-section">
            <h2>Test AI Functionality</h2>
            <p>This page tests the backend APIs with sample content about photosynthesis.</p>
            
            <button class="test-button" onclick="testSummary()">Generate Summary</button>
            <button class="test-button" onclick="testFlashcards()">Generate Flashcards</button>
            <button class="test-button" onclick="testQuiz()">Generate Quiz</button>
            <button class="test-button" onclick="testAll()">Test All</button>
            
            <div id="results"></div>
        </div>

        <div class="test-section">
            <h2>Sample Content</h2>
            <div class="result">
Photosynthesis is the process by which plants, algae, and some bacteria convert light energy into chemical energy stored in glucose molecules. This essential biological process occurs in the chloroplasts of plant cells and is fundamental to life on Earth.

The overall chemical equation for photosynthesis is:
6CO‚ÇÇ + 6H‚ÇÇO + light energy ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ

This means that six molecules of carbon dioxide and six molecules of water, using light energy, produce one molecule of glucose and six molecules of oxygen.

There are two main stages of photosynthesis:

1. Light-Dependent Reactions: These occur in the thylakoid membranes of the chloroplasts and require direct sunlight. During this stage, chlorophyll and other pigments absorb light energy, which is used to split water molecules (photolysis) and produce ATP (adenosine triphosphate) and NADPH (nicotinamide adenine dinucleotide phosphate).

2. Light-Independent Reactions (Calvin Cycle): These occur in the stroma of the chloroplasts and do not directly require light. However, they depend on the products of the light-dependent reactions. During this stage, CO‚ÇÇ is fixed and converted into glucose using the energy from ATP and NADPH.

Several factors affect the rate of photosynthesis:
- Light intensity: Higher light intensity generally increases the rate up to a point
- Carbon dioxide concentration: More CO‚ÇÇ typically increases the rate
- Temperature: There's an optimal temperature range; too hot or too cold reduces efficiency
- Water availability: Essential for the light-dependent reactions

Photosynthesis is crucial because:
- It produces the oxygen we breathe
- It forms the base of most food chains
- It helps regulate atmospheric CO‚ÇÇ levels
- It provides energy for nearly all living organisms

Understanding photosynthesis is essential for comprehending how ecosystems function, how climate change affects plant life, and how we might develop more sustainable agricultural practices.
            </div>
        </div>
    </div>

    <script>
        const sampleContent = `Photosynthesis is the process by which plants, algae, and some bacteria convert light energy into chemical energy stored in glucose molecules. This essential biological process occurs in the chloroplasts of plant cells and is fundamental to life on Earth.

The overall chemical equation for photosynthesis is:
6CO‚ÇÇ + 6H‚ÇÇO + light energy ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ

This means that six molecules of carbon dioxide and six molecules of water, using light energy, produce one molecule of glucose and six molecules of oxygen.

There are two main stages of photosynthesis:

1. Light-Dependent Reactions: These occur in the thylakoid membranes of the chloroplasts and require direct sunlight. During this stage, chlorophyll and other pigments absorb light energy, which is used to split water molecules (photolysis) and produce ATP (adenosine triphosphate) and NADPH (nicotinamide adenine dinucleotide phosphate).

2. Light-Independent Reactions (Calvin Cycle): These occur in the stroma of the chloroplasts and do not directly require light. However, they depend on the products of the light-dependent reactions. During this stage, CO‚ÇÇ is fixed and converted into glucose using the energy from ATP and NADPH.

Several factors affect the rate of photosynthesis:
- Light intensity: Higher light intensity generally increases the rate up to a point
- Carbon dioxide concentration: More CO‚ÇÇ typically increases the rate
- Temperature: There's an optimal temperature range; too hot or too cold reduces efficiency
- Water availability: Essential for the light-dependent reactions

Photosynthesis is crucial because:
- It produces the oxygen we breathe
- It forms the base of most food chains
- It helps regulate atmospheric CO‚ÇÇ levels
- It provides energy for nearly all living organisms

Understanding photosynthesis is essential for comprehending how ecosystems function, how climate change affects plant life, and how we might develop more sustainable agricultural practices.`;

        function addResult(title, content, isError = false) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = 'result';
            div.innerHTML = `<strong>${title}:</strong>\n${content}`;
            if (isError) {
                div.style.borderColor = '#dc2626';
                div.style.backgroundColor = '#fef2f2';
            }
            results.appendChild(div);
        }

        function addLoading(title) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = 'result loading';
            div.innerHTML = `<strong>${title}:</strong>\nProcessing...`;
            div.id = 'loading-' + Date.now();
            results.appendChild(div);
            return div.id;
        }

        function updateLoading(id, content, isError = false) {
            const element = document.getElementById(id);
            if (element) {
                element.className = 'result' + (isError ? ' error' : ' success');
                element.innerHTML = content;
            }
        }

        async function testSummary() {
            const loadingId = addLoading('üìù Generating Summary');
            try {
                const response = await fetch('/api/generate-summary', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: sampleContent })
                });
                
                const data = await response.json();
                if (response.ok) {
                    updateLoading(loadingId, `‚úÖ Summary Generated Successfully:\n\n${data.summary}`);
                } else {
                    updateLoading(loadingId, `‚ùå Error: ${data.error}`, true);
                }
            } catch (error) {
                updateLoading(loadingId, `‚ùå Network Error: ${error.message}`, true);
            }
        }

        async function testFlashcards() {
            const loadingId = addLoading('üé¥ Generating Flashcards');
            try {
                const response = await fetch('/api/generate-flashcards', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: sampleContent })
                });
                
                const data = await response.json();
                if (response.ok) {
                    const flashcardsText = data.flashcards.map((card, index) => 
                        `${index + 1}. Front: ${card.front}\n   Back: ${card.back}\n   Difficulty: ${card.difficulty}`
                    ).join('\n\n');
                    updateLoading(loadingId, `‚úÖ Flashcards Generated Successfully (${data.flashcards.length} cards):\n\n${flashcardsText}`);
                } else {
                    updateLoading(loadingId, `‚ùå Error: ${data.error}`, true);
                }
            } catch (error) {
                updateLoading(loadingId, `‚ùå Network Error: ${error.message}`, true);
            }
        }

        async function testQuiz() {
            const loadingId = addLoading('üìã Generating Quiz');
            try {
                const response = await fetch('/api/generate-quiz', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: sampleContent })
                });
                
                const data = await response.json();
                if (response.ok) {
                    const quizText = data.quiz.map((question, index) => 
                        `${index + 1}. ${question.question}\n   A) ${question.options[0]}\n   B) ${question.options[1]}\n   C) ${question.options[2]}\n   D) ${question.options[3]}\n   Correct: ${String.fromCharCode(65 + question.correctAnswer)}\n   Explanation: ${question.explanation}`
                    ).join('\n\n');
                    updateLoading(loadingId, `‚úÖ Quiz Generated Successfully (${data.quiz.length} questions):\n\n${quizText}`);
                } else {
                    updateLoading(loadingId, `‚ùå Error: ${data.error}`, true);
                }
            } catch (error) {
                updateLoading(loadingId, `‚ùå Network Error: ${error.message}`, true);
            }
        }

        async function testAll() {
            document.getElementById('results').innerHTML = '';
            await testSummary();
            await new Promise(resolve => setTimeout(resolve, 1000));
            await testFlashcards();
            await new Promise(resolve => setTimeout(resolve, 1000));
            await testQuiz();
        }
    </script>
</body>
</html>